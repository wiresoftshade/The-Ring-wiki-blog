## 1 Введение

После нашего успеха с физически обоснованным затенением волос в Рапунцель [^27], мы начали рассматривать физически обоснованные модели затенения для более широкого диапазона материалов. С физически обоснованной моделью волос мы смогли достичь большой степени визуального богатства, сохраняя при этом художественный контроль. Однако оказалось сложным интегрировать освещение волос с остальной частью сцены, которая все еще использовала традиционные «специальные» модели затенения и точечные источники света. Для последующих фильмов мы хотели увеличить богатство всех наших материалов, одновременно делая световые реакции более согласованными между материалами и средами, а также хотели повысить производительность художника за счет использования упрощенных элементов управления.

[^27]: Иман Садеги, Хизер Притчетт, Хенрик Ванн Йенсен и Расмус Тамсторф. Дружественная художнику система затенения волос. *В работах ACM SIGGRAPH 2010*, SIGGRAPH ’10, страницы 56:1–56:10, Нью-Йорк, штат Нью-Йорк, США, 2010. ACM. / Iman Sadeghi, Heather Pritchett, Henrik Wann Jensen, and Rasmus Tamstorf. An artist friendly hair shading system. In *ACM SIGGRAPH 2010 papers*, SIGGRAPH ’10, pages 56:1–56:10, New York, NY, USA, 2010. ACM.

Когда мы начали наше исследование, было неочевидно, какие модели использовать или даже насколько физически обоснованными мы хотим быть. Стоит ли быть идеально энергосберегающими? Должны ли мы отдавать предпочтение физическим параметрам, таким как показатель преломления?

Для диффузного, Ламберт, казалось, был общепринятой нормой, в то время как зеркальнность, казалось, получил больше всего внимания в литературе. Некоторые модели, такие как Ашихмин-Ширли (2000) [^3], стремились быть интуитивными и практичными, при этом физически правдоподобными, в то время как другие, такие как Хе и др. (1991) [^12], предоставили более полную физическую модель. Еще одни были нацелены на улучшение подгонки данных ([^15], [^14], [^22], [^17], [^4]), но немногие из них подходят для прямой манипуляции. Мы могли бы реализовать несколько моделей и позволить художникам выбирать и комбинировать их, но тогда мы бы вернулись к взрыву параметров, от которого мы пытались уйти.

[^3]: Майкл Ашихмин и Питер Ширли. Анизотропная модель BRDF Фонга. Журнал графических инструментов: JGT, 5(2):25–32, 2000. / Michael Ashikhmin and Peter Shirley. An anisotropic Phong BRDF model. *Journal of Graphics Tools: JGT*, 5(2):25–32, 2000.

[^4]: М. М. Багер, К. Солер и Н. Хольцшух. Точная подгонка измеренных отражательных способностей с использованием смещенного гамма-микрогранного распределения. *Форум компьютерной графики*, 31(4):1509–1518, 2012. / M. M. Bagher, C. Soler, and N. Holzschuch. Accurate fitting of measured reflectances using a shifted gamma micro-facet distribution. *Computer Graphics Forum*, 31(4):1509–1518, 2012.

[^12]: Сяо Д. Хэ, Кеннет Э. Торранс, Франсуа X. Силлион и Дональд П. Гринберг. Комплексная физическая модель отражения света. В компьютерной графике (ACM SIGGRAPH ’91 Proceedings), том 25, страницы 175–186, июль 1991 г. / Xiao D. He, Kenneth E. Torrance, Francois X. Sillion, and Donald P. Greenberg. A Comprehensive Physical Model for Light Reflection. In Computer Graphics (ACM SIGGRAPH ’91 Proceedings), volume 25, pages 175–186, July 1991.

[^14]: Мурат Курт, Ласло Ширмай-Калос и Ярослав Кршиванек. Анизотропная модель BRDF для подгонки и рендеринга Монте-Карло. *SIGGRAPH Компьют. График.*, 44(1):3:1–3:15, февраль 2010 г. / Murat Kurt, László Szirmay-Kalos, and Jaroslav Kŕivánek. An anisotropic brdf model for fitting and monte carlo rendering. *SIGGRAPH Comput. Graph.*, 44(1):3:1–3:15, February 2010.

[^15]: Эрик П. Лафортюн, Синг-Чунг Фу, Кеннет Э. Торранс и Дональд П. Гринберг. Нелинейная аппроксимация функций отражения. В *Computer Graphics (ACM SIGGRAPH ’97 Proceedings)*, том 31, страницы 117–126, 1997. / Eric P. Lafortune, Sing-Choong Foo, Kenneth E. Torrance, and Donald P. Greenberg. Non-linear approximation of reflectance functions. In *Computer Graphics (ACM SIGGRAPH ’97 Proceedings)*, volume 31, pages 117–126, 1997.

[^17]: Йоаким Лёв, Йоэль Кронандер, Андерс Иннерман и Йонас Унгер. Модели Brdf для точного и эффективного рендеринга глянцевых поверхностей. *ACM Trans. Graph.*, 31(1):9:1–9:14, февраль 2012 г. / Joakim Löw, Joel Kronander, Anders Ynnerman, and Jonas Unger. Brdf models for accurate and efficient rendering of glossy surfaces. *ACM Trans. Graph.*, 31(1):9:1–9:14, February 2012.

[^22]: Ко Нишино и Стивен Ломбарди. Модель отражения на основе направленной статистики для изотропных двунаправленных функций распределения отражения. *J. Opt. Soc. Am. A*, 28(1):8–18, январь 2011 г. / Ko Nishino and Stephen Lombardi. Directional statistics-based reflectance model for isotropic bidirectional reflectance distribution functions. *J. Opt. Soc. Am. A*, 28(1):8–18, Jan 2011.

Одним из исследований большого разнообразия измеренных материалов было исследование Нгана и др. (2005) [^21], в котором сравнивались пять популярных моделей. Некоторые модели в целом справились лучше других, но интересно, что была сильная корреляция между характеристиками моделей — некоторые материалы были хорошо представлены всеми моделями, а для других ни одна модель не оказалась подходящей. Добавление дополнительной зеркальной доли помогло лишь в нескольких случаях. Возникает вопрос: что не представлено в сложных материалах?

[^21]: Эдди Нган, Фредо Дюран и Войцех Матусик. Экспериментальный анализ моделей BRDF. В работе Кавиты Балы и Филиппа Дютре, редакторов, *Eurographics Symposium on Rendering*, страницы 117–126, Констанц, Германия, 2005. Ассоциация Eurographics. / Addy Ngan, Frédo Durand, and Wojciech Matusik. Experimental analysis of BRDF models. In Kavita Bala and Philip Dutré, editors, *Eurographics Symposium on Rendering*, pages 117–126, Konstanz, Germany, 2005. Eurographics Association.

Чтобы ответить на этот вопрос и оценить модели BRDF более интуитивно, мы разработали новый просмотрщик BRDF, который мог отображать и сравнивать как измеренные, так и аналитические BRDF. Мы открыли новые, интуитивно понятные способы просмотра измеренных данных BRDF и обнаружили интересные особенности в измеренных материалах, которые не были хорошо представлены известными моделями.

В этих заметках к курсу мы поделимся наблюдениями, полученными при изучении измеренных материалов, а также выводами, которые мы почерпнули о том, какие модели соответствуют измеренным данным, а где они не дотягивают. Затем мы представим нашу новую модель, которая теперь используется во всех текущих постановках. Мы также опишем наш опыт внедрения этой новой модели в постановку и обсудим, как нам удалось добавить нужный уровень художественного контроля, сохранив при этом простоту и надежность.

